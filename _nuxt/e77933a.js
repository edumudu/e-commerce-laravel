(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{407:function(e,t,r){var content=r(410);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(6).default)("0b26b2b8",content,!0,{sourceMap:!1})},409:function(e,t,r){"use strict";var n=r(407);r.n(n).a},410:function(e,t,r){(t=r(5)(!1)).push([e.i,".overlay-loading[data-v-1fcb320a]{position:absolute;z-index:2;top:0;left:0;display:flex;justify-content:center;align-items:center;width:100%;height:100%;min-height:200px;background-color:#fff}.overlay-loading>img[data-v-1fcb320a]{width:150px;height:150px}",""]),e.exports=t},411:function(e,t,r){"use strict";r(409);var n=r(3),component=Object(n.a)({},(function(){var e=this.$createElement;this._self._c;return this._m(0)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"overlay-loading"},[t("img",{attrs:{src:"/assets/svgs/load-1s-200px.svg"}})])}],!1,null,"1fcb320a",null);t.a=component.exports},472:function(e,t,r){"use strict";r.r(t);r(17),r(31),r(34),r(35),r(9);var n=r(4),o=r(7),c=r(411),l={layout:"dashboard",components:{ValidationObserver:o.a,ValidationProvider:o.b,OverlayLoading:c.a},fetch:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("/genre");case 3:return e.genres=t.sent.data,t.next=6,e.$axios.$get("/category");case 6:return e.categories=t.sent.data,t.next=9,e.$axios.$get("/product/".concat(e.$route.params.slug));case 9:e.product=t.sent,e.product.photos=e.product.photos.map(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t,i){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{mode:"no-cors"});case 2:return r=e.sent,e.abrupt("return",new File(r.blob(),i));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),e.product.genre=e.product.genre.id,e.product.categories=e.product.categories.map((function(e){return e.id})),t.next=28;break;case 15:t.prev=15,t.t0=t.catch(0),t.t1=t.t0.response.status,t.next=404===t.t1?21:24;break;case 21:return e.$toast.error("Not found product"),e.$router.push("/admin/product"),t.abrupt("break",25);case 24:e.$toast.error("Something went wrong, try again later");case 25:t.next=28;break;case 27:e.$nuxt.context.redirect("/admin/product");case 28:case"end":return t.stop()}}),t,null,[[0,15]])})))()})),data:function(){return{product:{name:"",photos:[]},categories:[],genres:[],sending:!1}},methods:{onSubmit:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$nuxt.$loading.start(),e.sending=!0,r=new FormData(e.$refs.formData),t.prev=3,t.next=6,e.$axios.$post("/product/".concat(e.product.slug),r,{headers:{"Content-Type":"multipart/form-data"}});case 6:e.$router.push("/admin/product"),e.$toast.success("Successful updated ".concat(e.product.name)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),e.$toast.error("Something went wrong, try again later");case 13:e.$nuxt.$loading.finish(),e.sending=!1;case 15:case"end":return t.stop()}}),t,null,[[3,10]])})))()},handleInputSelection:function(e){this.product.photos=e}},head:function(){return{title:"Update ".concat(this.product.name," | Dashboard ").concat(void 0)}}},d=r(3),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"page-content"},[r("overlay-loading",{directives:[{name:"show",rawName:"v-show",value:e.$fetchState.pending,expression:"$fetchState.pending"}]}),e._v(" "),r("div",{staticClass:"card float-title"},[r("h1",{staticClass:"card-title"},[e._v("\n      Editar product "+e._s(e.product.name)+"\n    ")]),e._v(" "),r("validation-observer",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.invalid,o=t.handleSubmit;return[r("form",{ref:"formData",on:{submit:function(t){return t.preventDefault(),o(e.onSubmit)}}},[r("div",{staticClass:"row"},[r("div",{staticClass:"form-group col-12 col-md-10"},[r("validation-provider",{attrs:{rules:"required|alpha_spaces|max:255"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors,o=t.valid;return[r("base-input",{attrs:{placeholder:"Nome",name:"name",error:n[0],"is-valid":o},model:{value:e.product.name,callback:function(t){e.$set(e.product,"name",t)},expression:"product.name"}})]}}],null,!0)})],1),e._v(" "),r("div",{staticClass:"form-group col-12 col-md-2"},[r("validation-provider",{attrs:{rules:"required|numeric|min:1"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors,o=t.valid;return[r("base-input",{attrs:{placeholder:"Estoque",name:"inventory",error:n[0],"is-valid":o},model:{value:e.product.inventory,callback:function(t){e.$set(e.product,"inventory",e._n(t))},expression:"product.inventory"}})]}}],null,!0)})],1),e._v(" "),r("div",{staticClass:"form-group col-12 col-md-4"},[r("validation-provider",{attrs:{rules:"required|decimals:2|min:1"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors,o=t.valid;return[r("base-input",{attrs:{placeholder:"Preço",name:"price",error:n[0],"is-valid":o},model:{value:e.product.price,callback:function(t){e.$set(e.product,"price",e._n(t))},expression:"product.price"}})]}}],null,!0)})],1),e._v(" "),r("div",{staticClass:"form-group col-12 col-md-4"},[r("validation-provider",{attrs:{rules:"required|numeric|min:1"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors,o=t.valid;return[r("base-select",{attrs:{placeholder:"Gênero",name:"genre",options:e.genres,error:n[0],"is-valid":o},model:{value:e.product.genre,callback:function(t){e.$set(e.product,"genre",t)},expression:"product.genre"}})]}}],null,!0)})],1),e._v(" "),r("div",{staticClass:"form-group col-12 col-md-4"},[r("validation-provider",{attrs:{rules:"required|numeric|min:1"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors,o=t.valid;return[r("base-select",{attrs:{placeholder:"Categoria",name:"categories[]",multiple:"",options:e.categories,error:n[0],"is-valid":o},model:{value:e.product.categories,callback:function(t){e.$set(e.product,"categories",t)},expression:"product.categories"}})]}}],null,!0)})],1),e._v(" "),r("div",{staticClass:"form-group col-12"},[r("validation-provider",{attrs:{rules:"image"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors,o=t.valid;return[r("base-file-input",{attrs:{placeholder:"Photos",name:"photos[]",multiple:"",error:n[0],"is-valid":o},on:{input:e.handleInputSelection}})]}}],null,!0)})],1),e._v(" "),r("div",{staticClass:"form-group col-12"},[r("button",{staticClass:"btn-press btn-large",attrs:{type:"submit",disabled:e.sending||n}},[e._v("\n              Atualizar\n            ")])])])])]}}])})],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);